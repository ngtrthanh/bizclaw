services:
  bizclaw:
    image: ghcr.io/bizclaw/bizclaw:latest
    container_name: bizclaw
    restart: unless-stopped
    ports:
      - "3000:3000"
    volumes:
      # Configuration
      - ${BIZCLAW_CONFIG:-~/.bizclaw}:/home/bizclaw/.bizclaw
      # Models (GGUF files)
      - ${BIZCLAW_MODELS:-~/.bizclaw/models}:/home/bizclaw/.bizclaw/models
    environment:
      - RUST_LOG=${RUST_LOG:-info}
    # Non-root: runs as 'bizclaw' user inside container
    # Override entrypoint args if needed:
    # command: ["serve", "--host", "0.0.0.0", "--port", "3000"]
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3000/health"]
      interval: 30s
      timeout: 5s
      retries: 3
      start_period: 10s
